<div class="card">
  <div class="card-head">Listado de tareas</div>
  <div class="card-body">
    <!-- Contenedor para el buscador y el botón de agregar -->
    <div class="buscador-agregar">
      <input type="text" [(ngModel)]="searchTerm" placeholder="Buscar tarea..." class="buscador" />
      <button class="btn agregar" (click)="openModal()">
        <i class="fas fa-plus"></i> Agregar
      </button>
    </div>
    <ol class="lista-tareas">
      <!-- Encabezado de la lista -->
      <li class="header">
        <p>N°</p>
        <p>Nombre</p>
        <p>Código</p>
        <p>Estado</p>
        <p>Fecha creación</p>
        <p>Usuario</p>
        <p>Acciones</p>
      </li>
      <!-- Iteración de tareas -->
      <li *ngFor="let tarea of filteredTareas">
        <p>{{tarea.id}}</p>
        <p>{{tarea.nombre}}</p>
        <p>{{tarea.codigo}}</p>
        <p>{{tarea.estado}}</p>
        <p>{{tarea.fecha_creacion | date}}</p>
        <p>{{tarea.usuario_creacion}}</p>
        <p class="acciones">
          <button class="btn editar" (click)="editTarea(tarea)">
            <i class="fas fa-pencil-alt"></i>
          </button>
          <button class="btn eliminar" (click)="deleteTarea(tarea.id)">
            <i class="fas fa-trash"></i>
          </button>
        </p>
      </li>
    </ol>
  </div>
</div>

<!-- Modal para agregar/editar tarea -->
<div *ngIf="isModalOpen" class="modal">
  <div class="modal-content">
    <span class="close" (click)="closeModal()">&times;</span>
    <h2>{{ isEditMode ? 'Editar Tarea' : 'Agregar Tarea' }}</h2>
    <form (ngSubmit)="isEditMode ? updateTarea() : addTarea()">
      <div>
        <label for="nombre">Nombre:</label>
        <input id="nombre" [(ngModel)]="selectedTarea.nombre" name="nombre" required />
      </div>
      <div>
        <label for="codigo">Código:</label>
        <input id="codigo" [(ngModel)]="selectedTarea.codigo" name="codigo" required />
      </div>
      <div>
        <label for="estado">Estado:</label>
        <input id="estado" [(ngModel)]="selectedTarea.estado" name="estado" type="number" />
      </div>
      <div>
        <label for="usuario_creacion">Usuario:</label>
        <input id="usuario_creacion" [(ngModel)]="selectedTarea.usuario_creacion" name="usuario_creacion" />
      </div>
      <div>
        <label for="fecha_creacion">Fecha Creación:</label>
        <input id="fecha_creacion" [(ngModel)]="selectedTarea.fecha_creacion" name="fecha_creacion" type="date" />
      </div>
      <button type="submit" class="btn {{ isEditMode ? 'editar' : 'agregar' }}">
        {{ isEditMode ? 'Actualizar' : 'Agregar' }}
      </button>
    </form>
  </div>
</div>
